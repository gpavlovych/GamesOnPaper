<nav class="navbar navbar-default navbar-static-top">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Games on paper</a>
    </div>
    <ul class="nav navbar-nav" *ngIf="user != null">
      <li dropdown>
        <a href="#" class="dropdown-toggle" dropdownToggle>Create game</a>
        <ul class="dropdown-menu" dropdownMenu>
          <li class="dropdown-header">Invite user to play</li>
          <li *ngFor="let gameToBeCreated of gamesToBeCreated"><img class="img-circle" width="24" height="24" src="{{gameToBeCreated.icon}}"/> <a href="#">{{gameToBeCreated.name}}</a></li>
          <li *ngIf="gamesToBeCreatedTotalCount>10"><a href="#">Show more</a></li>
        </ul>
      </li>
      <li dropdown>
        <a href="#" class="dropdown-toggle" dropdownToggle>Invitations <span class="badge">5</span></a>
        <ul class="dropdown-menu" dropdownMenu>
          <li class="dropdown-header">Incoming invitations</li>
          <li *ngFor="let incomingInvitation of incomingInvitations">
            <a href="#">
            <!--  <img src="{{incomingInvitation.player1.userPic}}" class="img-circle" width="50" height="50"/>-->
              {{incomingInvitation.players[0].userName}} invited you to play {{incomingInvitation.gameDefinition.name}}!
              <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-ok"></span></button>
              <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-remove"></span></button>
            </a>
          </li>
          <li *ngIf="incomingInvitationsTotalCount>10"><a href="#">Show more</a></li>
          <li class="divider"></li>
          <li class="dropdown-header">Outgoing invitations</li>
          <li *ngFor="let outgoingInvitation of outgoingInvitations">
            <a href="#">
            <!--  <img src="{{outgoingInvitation.player2.userPic}}" class="img-circle" width="50" height="50"/> -->
              {{outgoingInvitation.players[1].userName}} invited to play {{outgoingInvitation.gameDefinition.name}} with you!
              <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-remove"></span></button>
            </a>
          </li>
          <li *ngIf="outgoingInvitationsTotalCount>10"><a href="#">Show more</a></li>
        </ul>
      </li>
      <li dropdown>
        <a href="#" class="dropdown-toggle" dropdownToggle>Active Games <span class="badge">5</span></a>
        <ul class="dropdown-menu" dropdownMenu>
          <template ngFor let-game [ngForOf]="activeGames | groupBy: 'gameDefinition.name'">
            <li class="dropdown-header">{{game.key}}</li>
            <li *ngFor="let activeGame of game.value">
              <a href="#">
                <!-- <img src="{{activeGame.userPic}}" class="img-circle" width="50" height="50"/> -->
              <!--  {{activeGame.userName}} <label class="label" [ngClass]="{'label-default': activeGame.yourScore==activeGame.opponentScore, 'label-success': activeGame.yourScore>activeGame.opponentScore, 'label-danger': activeGame.yourScore<activeGame.opponentScore}">{{activeGame.yourScore}}:{{activeGame.opponentScore}}</label>-->
                <button type="button" class="btn btn-default" *ngIf="!activeGame.finishedBy"><span class="glyphicon glyphicon-remove"></span> Finish</button>
                <span *ngIf="activeGame.finishedBy && activeGame.finishedBy!=user.username">
                    {{activeGame.finishedBy}} wants to finish the game. Do you agree?
                    <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-ok"></span></button>
                    <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-remove"></span></button>
                  </span>
                <span *ngIf="activeGame.finishedBy && activeGame.finishedBy==user.username">
                    You want to finish the game. Waiting for opponent decision.
                    <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-remove"></span></button>
                  </span>
              </a>
            </li>
            <li *ngIf="activeGamesTotalCount>10"><a href="#">Show more</a></li>
            <li class="divider"></li>
          </template>
        </ul>
      </li>
      <li dropdown>
        <a href="#" class="dropdown-toggle" dropdownToggle>Finished Games <span class="badge">5</span></a>
        <ul class="dropdown-menu" dropdownMenu>
          <!--[ngfor]="let (key, games) of finishedGames | groupBy: 'gameName'"-->
          <template ngFor let-game [ngForOf]="finishedGames | groupBy: 'gameDefinition.name'">
            <li class="dropdown-header">{{game.key}}</li>
            <li *ngFor="let finishedGame of game.value">
              <a href="#">
               <!-- <img src="{{finishedGame.userPic}}" class="img-circle" width="50" height="50"/>-->
               <!-- {{finishedGame.userName}} <label class="label" [ngClass]="{'label-default': finishedGame.yourScore==finishedGame.opponentScore, 'label-success': finishedGame.yourScore>finishedGame.opponentScore, 'label-danger': finishedGame.yourScore<finishedGame.opponentScore}">{{finishedGame.yourScore}}:{{finishedGame.opponentScore}}</label> @ {{finishedGame.endDate | date:'yyyy-MM-dd HH:mm:ss Z'}}-->
              </a>
            </li>
            <li class="divider"></li>
          </template>
          <li *ngIf="finishedGamesTotalCount>10"><a href="#">Show more</a></li>
        </ul>
      </li>
    </ul>
    <ul class="nav navbar-nav navbar-right" *ngIf="user!=null">
      <li><a class="navbar-brand"><strong><span><img class="img-circle" width="24" height="24" src="{{user.userPic}}"/></span> {{user.userName}}</strong></a></li>
      <li><a href="#/login" class="navbar-brand"><strong><span class="glyphicon glyphicon-log-out"></span> Logout</strong></a></li>
    </ul>
  </div>
</nav>

<div class="container">
  <!--<div [ngClass]="{ 'alert': flash, 'alert-success': flash.type === 'success', 'alert-danger': flash.type === 'error' }" ng-if="flash" ng-bind="flash.message"></div>-->
  <router-outlet></router-outlet>
    <!-- Routed views go here -->
</div>
